dnl Process this file with 'autoconf' to produce a 'configure' script
dnl $Header: /users/source/archives/td_lib.vcs/RCS/configure.in,v 12.21 1994/07/02 00:41:46 tom Exp $
AC_REVISION($Revision: 12.21 $)
AC_INIT(include/td_lib.h)
AC_HAVE_LIBRARY(bsd, [LIBS="$LIBS -lbsd"])
TD_RCS_SCCS
AC_CONST
AC_STDC_HEADERS
AC_DIR_HEADER
AC_MAJOR_HEADER
AC_RETSIGTYPE
TD_REGEX
TD_ANSI_CPP
AC_HAVE_HEADERS(stdlib.h unistd.h string.h memory.h pwd.h)
AC_HAVE_HEADERS(stdarg.h varargs.h)
AC_HAVE_HEADERS(file.h fcntl.h ioctl.h)
dnl don't combine <file.h> and <sys/file.h>, because autoconf gets confused
AC_HAVE_HEADERS(sys/file.h sys/fcntl.h sys/ioctl.h)
AC_HAVE_HEADERS(termios.h sgtty.h utime.h)
TD_WAIT
TD_SIZE_T
TD_CURSES
TD_HAVE_FUNCS(
_exit \
_filbuf \
_flsbuf \
beep \
bzero \
calloc \
closedir \
creat \
endgrent \
endpwent \
execvp \
exit \
fclose \
fflush \
fgetc \
fork \
fprintf \
fputc \
fputs \
fread \
free \
fscanf \
fseek \
fwrite \
getcwd \
getegid \
getenv \
geteuid \
getgid \
getgrent \
getgrgid \
getgrnam \
getopt \
getpwent \
getpwnam \
getpwuid \
getuid \
getwd \
ioctl \
keypad \
lstat \
ltostr \
malloc \
memmove \
mkstemp \
mktemp \
open \
opendir \
pclose \
perror \
popen \
printf \
putenv \
puts \
readdir \
readlink \
realloc \
rename \
rewind \
rewinddir \
seekdir \
setbuf \
setegid \
setgrent \
setlinebuf \
setpwent \
setrgid \
setruid \
sprintf \
sscanf \
strchr \
strerror \
strrchr \
strtok \
strtol \
symlink \
system \
tcgetattr \
telldir \
tgetent \
tgetnum \
time \
tolower \
toupper \
ungetc \
utime \
vfork \
wait \
)

### DataItems/Structs
TD_SYS_ERRLIST
TD_GMTOFF

### DataTypes
TD_DEV_T
TD_INO_T
AC_OFF_T
AC_UID_T
AC_VFORK
AC_TIME_WITH_SYS_TIME
TD_PROGRAM_FULLPATH(DEFAULT_EDITOR, vi $EDITOR)
TD_PROGRAM_FULLPATH(DEFAULT_BROWSE, view $BROWSE)
TD_PROGRAM_FULLPATH(DEFAULT_PAGER, more $PAGER less most)

###	output config.h
#
#	This bypasses the normal autoconf process because we're generating an
#	arbitrary number of NEED_xxxx definitions with the TD_HAVE_FUNCS macro. 
#	Rather than populate an aclocal.h file with all of those definitions,
#	we do it here.
#
###
changequote({,})dnl
AC_OUTPUT(config_h,
{
echo creating config.h
sed	-e '/^# /d' \
	-e 's/ -D/\
#define /g' \
	-e 's/\(#define [A-Za-z_][A-Za-z0-9_]*\)=/\1	/g' \
	config_h >config.h
	if ( cmp -s config.h include/config.h 2>/dev/null )
	then
		echo "include/config.h is unchanged"
		rm -f config.h
	else
		mv config.h include
	fi
}
echo removing config_h
rm config_h
)
changequote([,])dnl

dnl+
dnl+ dnl Process this file with autoconf to produce a configure script.
dnl+ AC_INIT(cpio.h)
dnl+ PROGS="cpio"
dnl+ AC_SUBST(PROGS)dnl
dnl+ AC_PROG_CC
dnl+ AC_PROG_CPP
dnl+ AC_GCC_TRADITIONAL
dnl+ AC_PROG_INSTALL
dnl+ AC_AIX
dnl+ AC_MINIX
dnl+ AC_ISC_POSIX
dnl+ AC_REMOTE_TAPE
dnl+ test -n "$have_mtio" && PROGS="$PROGS mt"
dnl+ AC_RSH
dnl+ AC_STDC_HEADERS
dnl+ AC_HAVE_HEADERS(string.h fcntl.h utime.h unistd.h sys/io/trioctl.h)
dnl+ AC_REPLACE_FUNCS(fnmatch bcopy mkdir strdup)
dnl+ AC_HAVE_FUNCS(strerror lchown)
dnl+ AC_VPRINTF
dnl+ AC_ALLOCA
dnl+ AC_XENIX_DIR
dnl+ AC_HAVE_LIBRARY(socket, [LIBS="$LIBS -lsocket"])
dnl+ AC_HAVE_LIBRARY(nsl, [LIBS="$LIBS -lnsl"])
dnl+ AC_OUTPUT(Makefile)
